Open PicoBlaze Assembler log for program "test.psm"
Generated by opbasm v1.3.9
  Assembled on 2019-09-12T00:32:11
  Target architecture: PicoBlaze-3

  Last occupied address: 04B hex
  Nominal program memory size: 1K (1024)  address(9:0)
  Actual memory size: 1024
  Occupied memory locations: 76
  Memory locations available: 948
  Scratchpad size: 64


Optimizations
-------------
  Static analysis:
    Dead instructions found: 22
    Analyzed entry points: 0x000, 0x3FF


Assembly listing
----------------
000                                          ;--------------------------------------------------------
000                                          ; File Created by SDCC : free open source ANSI-C Compiler
000                                          ; Version 3.0.1 #6227 (Oct 24 2011) (CYGWIN)
000                                          ; This file was generated Thu Sep 12 00:32:03 2019
000                                          ;--------------------------------------------------------
000                                          ;--------------------------------------------------------
000                                          ; global & static initialisations
000                                          ;--------------------------------------------------------

000  00F3F                                   load sf, 3f
001  34002            ╭⤙                     jump __sdcc_program_startup
002                   │                      ;--------------------------------------------------------
002                   │                      ; Home
002                   │                      ;--------------------------------------------------------
002                   │ __sdcc_program_startup:
002  30036      ╭─────┴⤙                     call _main
003             │                            ;	return from main will lock up
003             │               __sdcc_loop:
003  34003      │     ╰▶                     jump __sdcc_loop
004             │                            ;--------------------------------------------------------
004             │                            ; code
004             │                            ;--------------------------------------------------------
004             │                            ;	device/include/pblaze/delay.h:51: void delay(unsigned char time)
004             │                    _delay:
004  010B0      ╭┬┬────▶                     load s0, sb
005             │││                          ;	device/include/pblaze/delay.h:53: volatile unsigned char i = time;
005  01100      │││                          load s1, s0
006             │││                 _L00101:
006             │││                          ;	device/include/pblaze/delay.h:54: for(; i > 0; i--)
006  01010      │││╭───▶                     load s0, s1
007  14000      ││││                         compare s0, 00
008  3540A      ││││  ╭⤙                     jump NZ, _LC00123
009  3400C      ││││ ╭─⤙                     jump _L00107
00A             ││││ ││            _LC00123:
00A  00001      ││││ │╰▶                     load s0, 01
00B  3400D      ││││ │╭⤙                     jump _L00108
00C             ││││ ││             _L00107:
00C  00000      ││││ ╰─▶                     load s0, 00
00D             ││││  │             _L00108:
00D  14000      ││││  ╰▶                     compare s0, 00
00E  35410      ││││  ╭⤙                     jump NZ, _LC00124
00F  3401B      ││││╭──⤙                     jump _L00105
010             │││││ │            _LC00124:
010             │││││ │                      ;	device/include/pblaze/delay.h:72: __endasm;
010  00200      │││││ ╰▶                     load s2, 00
011  18201      │││││                        add s2, 01
012  00100      │││││                        load s1, 00
013             │││││                 rpt22:
013  18101      │││││╭─▶                     add s1, 01
014  00000      ││││││                       load s0, 00
015             ││││││                rpt11:
015  18001      ││││││╭▶                     add s0, 01
016  35415      ││││││╰⤙                     jump NZ, rpt11
017  14100      ││││││                       compare s1, 00
018  35413      │││││╰─⤙                     jump NZ, rpt22
019             │││││                        ;	device/include/pblaze/delay.h:54: for(; i > 0; i--)
019  1C101      │││││                        sub s1, 01
01A  34006      │││╰───⤙                     jump _L00101
01B             │││ │               _L00105:
01B  2A000      │││ ╰──▶                     return
01C             │││                          ;	device/include/pblaze/port.h:16: void __port_write(unsigned char port, unsigned char arg)
01C             │││           ___port_write:
01C             │││                          ;	device/include/pblaze/port.h:24: __endasm;
01C  2D100      │││╭───▶                     output s1, s0
01D             ││││                         ;	device/include/pblaze/port.h:25: delay(MIN_PAUSE);
01D  00B0A      ││││                         load sb, 0a
01E  30004      ││╰────⤙                     call _delay
01F  2A000      ││ │                         return
020             ││ │                         ;	device/include/pblaze/port.h:28: unsigned char __port_read(volatile unsigned char port)
020             ││ │           ___port_read:
020  010B0 DEAD ││ │                         load s0, sb
021             ││ │                         ;	device/include/pblaze/port.h:30: volatile unsigned char d = 0;
021  00100 DEAD ││ │                         load s1, 00
022             ││ │                         ;	device/include/pblaze/port.h:31: volatile unsigned char p = port;
022  01200 DEAD ││ │                         load s2, s0
023  01320 DEAD ││ │                         load s3, s2
024             ││ │                         ;	device/include/pblaze/port.h:34: __endasm;
024  05130 DEAD ││ │                         input s1, s3
025             ││ │                         ;	device/include/pblaze/port.h:35: delay(MIN_PAUSE);
025  2F0F0 DEAD ││ │                         store s0, (sf)
026  1CF01 DEAD ││ │                         sub sf, 01
027  2F1F0 DEAD ││ │                         store s1, (sf)
028  1CF01 DEAD ││ │                         sub sf, 01
029  2F3F0 DEAD ││ │                         store s3, (sf)
02A  1CF01 DEAD ││ │                         sub sf, 01
02B  00B0A DEAD ││ │                         load sb, 0a
02C  30004 DEAD │╰─────⤙                     call _delay
02D  18F01 DEAD │  │                         add sf, 01
02E  073F0 DEAD │  │                         fetch s3, (sf)
02F  18F01 DEAD │  │                         add sf, 01
030  071F0 DEAD │  │                         fetch s1, (sf)
031  18F01 DEAD │  │                         add sf, 01
032  070F0 DEAD │  │                         fetch s0, (sf)
033             │  │                         ;	device/include/pblaze/port.h:36: return d;
033  01210 DEAD │  │                         load s2, s1
034  01B20 DEAD │  │                         load sb, s2
035  2A000 DEAD │  │                         return
036             │  │                         ;	test.c:8: void main()
036             │  │                  _main:
036             │  │                         ;	test.c:12: aux = 0xaa;
036  000AA      ╰──────▶                     load s0, aa
037             │  │                         ;	test.c:14: while(aux) {
037             │  │                _L00116:
037  14000      │  │ ╭─▶                     compare s0, 00
038  3543A      │  │ │╭⤙                     jump NZ, _LC00125
039  3404B      │  │╭──⤙                     jump _L00119
03A             │  ││││            _LC00125:
03A             │  ││││                      ;	test.c:15: __port_write(PORTA,aux);
03A  2F0F0      │  │││╰▶                     store s0, (sf)
03B  1CF01      │  │││                       sub sf, 01
03C  00B00      │  │││                       load sb, 00
03D  01C00      │  │││                       load sc, s0
03E  3001C      │  ╰───⤙                     call ___port_write
03F  18F01      │   ││                       add sf, 01
040  070F0      │   ││                       fetch s0, (sf)
041             │   ││                       ;	test.c:17: delay(1);
041  2F0F0      │   ││                       store s0, (sf)
042  1CF01      │   ││                       sub sf, 01
043  00B01      │   ││                       load sb, 01
044  30004      ╰──────⤙                     call _delay
045  18F01          ││                       add sf, 01
046  070F0          ││                       fetch s0, (sf)
047                 ││                       ;	test.c:18: aux ^= 0xff;
047  01100          ││                       load s1, s0
048  0E1FF          ││                       xor s1, ff
049  01010          ││                       load s0, s1
04A  34037          │╰─⤙                     jump _L00116
04B                 │               _L00119:
04B  2A000          ╰──▶                     return
04C                                          ;--------------------------------------------------------
04C                                          ; interrupt vector
04C                                          ;--------------------------------------------------------

All unused memory locations contain zero (equivalent to "LOAD s0, 00")


PSM files that have been assembled
----------------------------------
    /home/saul/projects/picoblaze/pbcc/test1/test.psm


List of defined constants
-------------------------
    CONSTANT name      Value  Source PSM file
 ----------------      -----  ---------------
    BEL                07
    BS                 08
    CR                 0D
    DCS                90
    DEL                7F
    ESC                1B
    HT                 09
    LF                 0A
    NUL                00
    ST                 9C
    VT                 0B
    datestamp_day      0C
    datestamp_month    09
    datestamp_year     13
    timestamp_hours    00
    timestamp_minutes  20
    timestamp_seconds  0B


  No tables defined


List of text strings
--------------------
    STRING name      Value          Source PSM file
 --------------      -----          ---------------
    Opbasm_version$  "1.3.9"
    datestamp$       "12 Sep 2019"
    timestamp$       "00:32:11"


List of line labels
-------------------
    Label                   Addr  Source PSM file
 --------                   ----  ---------------
    _L00101                 006   test.psm
    _L00105                 01B   test.psm
    _L00107                 00C   test.psm
    _L00108                 00D   test.psm
    _L00116                 037   test.psm
    _L00119                 04B   test.psm
    _LC00123                00A   test.psm
    _LC00124                010   test.psm
    _LC00125                03A   test.psm
 *  ___port_read            020   test.psm
    ___port_write           01C   test.psm
    __sdcc_loop             003   test.psm
    __sdcc_program_startup  002   test.psm
    _delay                  004   test.psm
    _main                   036   test.psm
    rpt11                   015   test.psm
    rpt22                   013   test.psm

       * Unreferenced label(s)


List of pragma blocks
---------------------
   Name  Addr range  Value
   ----  ----------  -----


Instruction usage statistics
----------------------------
   Instruction  Instances
   -----------  ---------
   ADD          8
   ADDCY        -
   AND          -
   CALL         5
   COMPARE      4
   DISABLE      -
   ENABLE       -
   FETCH        5
   INPUT        1
   JUMP         13
   LOAD         23
   OR           -
   OUTPUT       1
   RETURN       4
   RETURNI      -
   RL           -
   RR           -
   SL0          -
   SL1          -
   SLA          -
   SLX          -
   SR0          -
   SR1          -
   SRA          -
   SRX          -
   STORE        5
   SUB          6
   SUBCY        -
   TEST         -
   XOR          1
